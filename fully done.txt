-- Richify Master Piece Crosshair Script
-- Credits: Richify | My Discord @r_0x.

getgenv().SelectedRayfieldTheme = getgenv().SelectedRayfieldTheme or "Serenity"

local SCRIPT_URL = "PUT_YOUR_RAW_SCRIPT_URL_HERE"

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Disable Rayfield notifications
if Rayfield.Notify then
    Rayfield.Notify = function() end
end

local Window = Rayfield:CreateWindow({
    Name = "Richify Goated Crossair",
    LoadingTitle = "The Goat Richify",
    LoadingSubtitle = "by Richify | My Discord @r_0x.",
    ShowText = "Richify Goat",
    Theme = getgenv().SelectedRayfieldTheme or "Serenity",
    ToggleUIKeybind = "Q",
    ConfigurationSaving = {Enabled = true, FolderName = nil, FileName = "richify_masterpiece"},
    KeySystem = false
})

local ClientTab = Window:CreateTab("Client", nil)
ClientTab:CreateSection("Crosshair Settings")

-- Defaults
local CrosshairStyle = "Default"
local CrosshairColor = Color3.fromRGB(255,255,255)
local CrosshairSize = 12
local CrosshairThickness = 2
local CrosshairOpacity = 1
local RainbowMode = false

local RainbowHue = 0
local CrosshairGUI
local CrosshairFrames = {}
local Running = true

-- Extra Visual Settings (ADD ONLY)
local CrosshairPixelScale = 1
local CrosshairGlowSize = 0
local CrosshairOutlineSize = 0

-- Init GUI
local function InitCrosshairGUI()
    if CrosshairGUI then return end
    local pg = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    CrosshairGUI = Instance.new("ScreenGui")
    CrosshairGUI.Name = "CustomCrosshair"
    CrosshairGUI.ResetOnSpawn = false
    CrosshairGUI.IgnoreGuiInset = true
    CrosshairGUI.Parent = pg
end

-- Build Crosshair
local function BuildCrosshair()
    for _, f in pairs(CrosshairFrames) do f:Destroy() end
    CrosshairFrames = {}

    if CrosshairStyle == "None" then return end

    local function CreateFrame(sizeX, sizeY, posX, posY, rot)
        local frame = Instance.new("Frame")
        frame.AnchorPoint = Vector2.new(0.5,0.5)
        frame.Position = UDim2.new(0.5, posX or 0, 0.5, posY or 0)
        frame.Size = UDim2.new(
            0, sizeX * CrosshairPixelScale,
            0, sizeY * CrosshairPixelScale
        )
        frame.Rotation = rot or 0
        frame.BackgroundColor3 = CrosshairColor
        frame.BackgroundTransparency = 1 - CrosshairOpacity
        frame.BorderSizePixel = 0
        frame.Parent = CrosshairGUI

        -- Outline
        if CrosshairOutlineSize > 0 then
            local stroke = Instance.new("UIStroke")
            stroke.Thickness = CrosshairOutlineSize
            stroke.Color = Color3.new(0,0,0)
            stroke.Transparency = 1 - CrosshairOpacity
            stroke.Parent = frame
        end

        -- Glow
        if CrosshairGlowSize > 0 then
            local glow = Instance.new("ImageLabel")
            glow.AnchorPoint = Vector2.new(0.5,0.5)
            glow.Position = UDim2.new(0.5,0,0.5,0)
            glow.Size = UDim2.new(1, CrosshairGlowSize, 1, CrosshairGlowSize)
            glow.BackgroundTransparency = 1
            glow.Image = "rbxassetid://5028857084"
            glow.ImageColor3 = CrosshairColor
            glow.ImageTransparency = 0.4
            glow.ZIndex = frame.ZIndex - 1
            glow.Parent = frame
        end

        table.insert(CrosshairFrames, frame)
    end

    if CrosshairStyle == "Dot" then
        CreateFrame(CrosshairThickness*2, CrosshairThickness*2)
    elseif CrosshairStyle == "Plus" then
        CreateFrame(CrosshairThickness, CrosshairSize)
        CreateFrame(CrosshairSize, CrosshairThickness)
    elseif CrosshairStyle == "T-Cross" then
        CreateFrame(CrosshairThickness, CrosshairSize)
        CreateFrame(CrosshairSize, CrosshairThickness, 0, -CrosshairSize/2)
    elseif CrosshairStyle == "X" then
        CreateFrame(CrosshairThickness, CrosshairSize, 0, 0, 45)
        CreateFrame(CrosshairThickness, CrosshairSize, 0, 0, -45)
    elseif CrosshairStyle == "Circle" then
        local c = Instance.new("Frame")
        c.AnchorPoint = Vector2.new(0.5,0.5)
        c.Position = UDim2.new(0.5,0,0.5,0)
        c.Size = UDim2.new(0,CrosshairSize,0,CrosshairSize)
        c.BackgroundColor3 = CrosshairColor
        c.BackgroundTransparency = 1 - CrosshairOpacity
        c.BorderSizePixel = 0
        c.Parent = CrosshairGUI
        Instance.new("UICorner", c).CornerRadius = UDim.new(1,0)

        -- Outline
        if CrosshairOutlineSize > 0 then
            local stroke = Instance.new("UIStroke")
            stroke.Thickness = CrosshairOutlineSize
            stroke.Color = Color3.new(0,0,0)
            stroke.Transparency = 1 - CrosshairOpacity
            stroke.Parent = c
        end

        -- Glow
        if CrosshairGlowSize > 0 then
            local glow = Instance.new("ImageLabel")
            glow.AnchorPoint = Vector2.new(0.5,0.5)
            glow.Position = UDim2.new(0.5,0,0.5,0)
            glow.Size = UDim2.new(1, CrosshairGlowSize, 1, CrosshairGlowSize)
            glow.BackgroundTransparency = 1
            glow.Image = "rbxassetid://5028857084"
            glow.ImageColor3 = CrosshairColor
            glow.ImageTransparency = 0.4
            glow.ZIndex = c.ZIndex - 1
            glow.Parent = c
        end

        table.insert(CrosshairFrames, c)
    else
        CreateFrame(CrosshairThickness, CrosshairSize)
        CreateFrame(CrosshairSize, CrosshairThickness)
    end
end

-- Update loop
task.spawn(function()
    while Running do
        if CrosshairGUI then
            local color = CrosshairColor
            if RainbowMode then
                RainbowHue = (RainbowHue + 0.005) % 1
                color = Color3.fromHSV(RainbowHue,1,1)
            end
            for _, frame in pairs(CrosshairFrames) do
                frame.BackgroundColor3 = color
                frame.BackgroundTransparency = 1 - CrosshairOpacity
                -- Glow update
                local glow = frame:FindFirstChildWhichIsA("ImageLabel")
                if glow then
                    glow.ImageColor3 = color
                end
            end
        end
        task.wait(0.03)
    end
end)

InitCrosshairGUI()
BuildCrosshair()

-- Sliders
ClientTab:CreateSlider({
    Name = "Crosshair Size (px)",
    Range = {2, 50},
    Increment = 1,
    Suffix = "px",
    CurrentValue = CrosshairSize,
    Flag = "CrosshairSize",
    Callback = function(value)
        CrosshairSize = value
        BuildCrosshair()
    end
})

ClientTab:CreateSlider({
    Name = "Crosshair Opacity",
    Range = {0, 1},
    Increment = 0.05,
    CurrentValue = CrosshairOpacity,
    Flag = "CrosshairOpacity",
    Callback = function(value)
        CrosshairOpacity = value
        BuildCrosshair()
    end
})

ClientTab:CreateSlider({
    Name = "Size PX Multiplier",
    Range = {1, 5},
    Increment = 0.1,
    CurrentValue = CrosshairPixelScale,
    Flag = "CrosshairPixelScale",
    Callback = function(v)
        CrosshairPixelScale = v
        BuildCrosshair()
    end
})

ClientTab:CreateSlider({
    Name = "Glow PX",
    Range = {0, 25},
    Increment = 1,
    CurrentValue = CrosshairGlowSize,
    Flag = "CrosshairGlowSize",
    Callback = function(v)
        CrosshairGlowSize = v
        BuildCrosshair()
    end
})

ClientTab:CreateSlider({
    Name = "Outline PX",
    Range = {0, 10},
    Increment = 1,
    CurrentValue = CrosshairOutlineSize,
    Flag = "CrosshairOutlineSize",
    Callback = function(v)
        CrosshairOutlineSize = v
        BuildCrosshair()
    end
})

-- ðŸŽ¨ NEW: Color Picker
ClientTab:CreateColorPicker({
    Name = "Crosshair Color",
    Color = CrosshairColor,
    Flag = "CrosshairColor",
    Callback = function(color)
        CrosshairColor = color
        RainbowMode = false -- disable rainbow when manual color is picked
        BuildCrosshair()
    end
})

-- Styles
local function CrosshairButton(name, style)
    ClientTab:CreateButton({
        Name = name,
        Callback = function()
            CrosshairStyle = style
            BuildCrosshair()
        end
    })
end

CrosshairButton("Default", "Default")
CrosshairButton("Dot", "Dot")
CrosshairButton("Plus", "Plus")
CrosshairButton("T-Cross", "T-Cross")
CrosshairButton("X Crosshair", "X")
CrosshairButton("Circle", "Circle")
CrosshairButton("Remove", "None")

ClientTab:CreateDivider()
ClientTab:CreateSection("Presets")

ClientTab:CreateButton({
    Name = "Competitive",
    Callback = function()
        CrosshairStyle = "Plus"
        CrosshairSize = 10
        CrosshairThickness = 2
        CrosshairColor = Color3.fromRGB(0,255,0)
        RainbowMode = false
        BuildCrosshair()
    end
})

ClientTab:CreateButton({
    Name = "Dot Only",
    Callback = function()
        CrosshairStyle = "Dot"
        CrosshairSize = 6
        CrosshairThickness = 3
        CrosshairColor = Color3.fromRGB(255,255,255)
        RainbowMode = false
        BuildCrosshair()
    end
})

ClientTab:CreateButton({
    Name = "Thick X",
    Callback = function()
        CrosshairStyle = "X"
        CrosshairSize = 16
        CrosshairThickness = 4
        CrosshairColor = Color3.fromRGB(255,0,0)
        RainbowMode = false
        BuildCrosshair()
    end
})

ClientTab:CreateButton({
    Name = "Rainbow Fun",
    Callback = function()
        CrosshairStyle = "Default"
        CrosshairSize = 14
        CrosshairThickness = 3
        RainbowMode = true
        BuildCrosshair()
    end
})

ClientTab:CreateDivider()

ClientTab:CreateButton({
    Name = "Uninject",
    Callback = function()
        Running = false
        if CrosshairGUI then
            CrosshairGUI:Destroy()
            CrosshairGUI = nil
        end
        Rayfield:Destroy()
    end
})

-- UI THEMES TAB
local ThemeTab = Window:CreateTab("UI Themes", nil)
ThemeTab:CreateSection("Switch UI Theme")

local function ReinjectWithTheme(theme)
    getgenv().SelectedRayfieldTheme = theme
    Running = false

    if CrosshairGUI then
        CrosshairGUI:Destroy()
        CrosshairGUI = nil
    end

    pcall(function()
        Rayfield:Destroy()
    end)

    task.wait(0.2)
    loadstring(game:HttpGet(SCRIPT_URL))()
end

local function ThemeButton(name, theme)
    ThemeTab:CreateButton({
        Name = name,
        Callback = function()
            ReinjectWithTheme(theme)
        end
    })
end

ThemeButton("Serenity", "Serenity")
ThemeButton("Dark", "Dark")
ThemeButton("Light", "Light")
ThemeButton("Default", "Default")
ThemeButton("Ocean", "Ocean")
ThemeButton("Amber", "Amber")
ThemeButton("Bloom", "Bloom")

-- Respawn support
game.Players.LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    InitCrosshairGUI()
    BuildCrosshair()
end)